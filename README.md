# 基于飞桨的多模态长辈监护系统
# 一、作品概述

本章主要从作品背景及研发意义、相关工作、作品简介、创新性描述、应用前景五个方面对《基于飞桨的多模态长辈智能监护系统》进行介绍。

## 1.1 背景及研发意义

2023年，中国60岁以上人口已经占到了总人口的19.2%，同比增长4.35%。其中85岁以上人口已经占到了总人口数的2%，同比增长5.26%。按照联合国标准，严重老龄化指标界定为7%，显而易见中国已经步入**严重的老龄化社会**，而且仍然在以极高的速度在**持续增长**。根据中华人民共和国国家卫生健康委员会发布的《2021年度国家老龄事业发展公报》显示，截至2021年末，全国60周岁及以上老年人口26736万人，占总人口的18.9%；全国65周岁及以上老年人口20056万人，占总人口的14.2%。全国65周岁及以上老年人口抚养比20.8%。

![img](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=MjZjMzQyZTg1ZmMyYzViOWNhNTgxM2M1MzgwY2I4YmRfWVJNUjk5eXRRWnJrOUdhYU5IeGJpSUhpVHRXSFc3dkZfVG9rZW46UzRmZmJid2Jyb1pKNnl4WFRyV2NmYlBLbmRoXzE2OTU4NzcwMzk6MTY5NTg4MDYzOV9WNA)

伴随着老龄化的逐年加剧，老龄人口逐年庞大，国家目前养老政策尚未完善，社会化养老系统化服务尚未形成体系，养老基金极度短缺，不能覆盖和满足国内60岁以上老年人和家庭的养老需求。国内老年人赡养问题，仍然以家庭养老为社会养老责任主要承担的形式。而根据国家统计局近日发布的数据显示，中国双职工家庭占到总家庭数的82%，这说明国内绝大多数的家庭形式都是**夫妻双职工家庭**，老人常常独自在家且无人照看，老人身体状况无法被子女即使掌握和把控，老人在子女视界范围外发生跌倒、走失、发生意外情况屡见不鲜。据统计，我国60岁及以上人口已超过2.6亿。中国疾病监测系统的数据显示，**跌倒**已成为我国65岁以上老年人因伤致死的**首位原因**。根据测算，我国每年有4000多万老年人至少发生1次跌倒，其中约一半发生在家中。而老年人由于**突发疾病、医疗不及时**等因素，罹患重大疾病而去世的消息在我们身边也屡见不鲜。

系统化、全方位地报告和监护老年人身体健康状态在现如今的社会现状下显得尤为重要。而市场上目前还未系统化地形成一套完整的老人健康监护系统体系，虽然安卓端智能手机一般配给了老年关怀模式，但也主要目的是为了方便老人使用智能手机，并未对老人的健康身体状态进行实时关怀，对老年人的身体及时情况的获取以及消息传送的及时性也极为不足，总结而言有以下三点痛点和问题：

**第一，未采取智能化技术进行实时监控老人身体健康状态。**当前市面上鲜少有老年关怀型移动端APP的出现，而且对技术使用方面均采用传统的信息的流性分类和识别，未使用近年来极具发展潜力的人工智能技术。一方面传统化技术的对海量数据的学习精度低，学习效果差，训练识别精度不便于把控；另一方面，产品的迭代发展空间也极为有限，不能随着智能化技术的发展而实时更新识别算法和深度优化。

**第二，纯文字作为信息交互媒介对文化程度偏低以及高龄老人的使用极不友好。**目前社会上的大多数老年人都出生自上世纪六十年代以前，整体教育普及度远不及当今社会普及度之大，老年人得到教育机会者少之又少，以纯文字形式的信息交互媒介对老年群体很不友好，高龄老人视力也已较年轻时大幅降低。所以以文字形式作为媒介在老年群体中通行是不正确的，应该以语音和图像为主模态与老人进行人机交互。

**第三，未考虑多场景多角度进行全方位的集成化监护。**只考虑在某一特定场景的防护具有诸多限制，如果老年保护性软件系统只考虑某一特定场景下的情况，可能会限制系统的功能，导致老年人无法使用其他功能，降低了软件系统的实用性。而且这会给老人带来一种虚假的安全感：如果老年保护性软件系统只针对某一特定场景进行保护，老年人可能会认为只要使用这个软件系统就可以保护自己的在线安全，形成虚假的安全感。不可避免地也存在一些漏洞和问题，可能会忽略其他场景下的安全问题和漏洞，导致软件系统存在安全隐患和问题。

针对以上问题，需要一套**专门针对老人友好型的多平台多模态的、能够执行老人、家属、救援中心三位一体的监护管理和调度系统**，为守护老人桑榆之康的公益事业提供有效且有力的技术保障，从而降低老人在家独自生活的风险度，为老人家属以及救援中心提供一套全流程的监护和风险应对策略和服务。该系统基于Web端与Android端开发，通过老人、家属、救援中心三方面联动，智能化、一体化、流程化地组织、进行与完成监护和风险应对任务。主要表现在应用循环神经网络，基于**Bi-LSTM的物理信号隐式感知模型，**在非可视情况下对老人可能的摔倒、疾病发作等异常情况识别和处理；基于**YOLO-v3和XGBoost的摔倒识别模型**，可以在室内环境下监护老人的身体异常状态；应用**路径规划和优化算法**，当老人在外走失的时候可以以语音方式为老人提供细致化、快捷化的导航服务；打通短信、Android端、Web端等**全平台信息流渠道**，实现角色间任务信息交互与监控；以及在未来P4交换机普及应用的大前提下的，采用基于NetBeacon的流量检测与调控技术，进行重大事件的网络流量优先级控制，保障老年人身体状态信息的及时传达和响应。

## 1.2 相关工作

### 1.2.1 传统老年人监护手段

传统的监护手段一般为社区养老和养老院两种，社区养老是指利用社区资源为老年人提供多样化的服务和活动，如日间照料、康复训练、文化娱乐、法律咨询等。社区养老的优点是可以促进老年人与社区的互动和融合，也可以提高他们的生活满意度和幸福感。而养老院是一种专门为老年人提供住宿、餐饮、医疗、娱乐等服务的机构，可以满足老年人的基本生活需求，也可以增加他们的社交活动和精神慰藉。养老院的优点是可以提供专业的护理和管理，也可以减轻家庭的负担。

这两种传统手段都有著明显的缺点：社区养老需要有社区足够的硬件设施和软件支持，也需要有良好的协调机制和监督机制，同时服务质量和覆盖范围不统一，老人也存在一定的安全隐患和孤独感；而养老院则存在著费用高昂的问题，同时由于养老院的管理机制问题可能导致老年人与家庭的疏远和不适感。

### 1.2.2 现有“赛博老年人”监护手段

华为云牵头开发的乐享智慧养老app是一款基于物联网技术的智慧养老解决方案，可以通过智能手表、智能床垫、智能门锁等设备，实时监测老年人的心率、血压、睡眠质量、活动轨迹等数据，并通过云平台和移动端进行数据分析和报警推送，实现对老年人的全方位监护和管理。功能全面，依靠其专业的云服务和边缘计算能力，可以为客户提供稳定高效的智慧康养服务。然而其全面的功能过分依赖于第三方硬件设备和应用开发商，对于个人用户使用成本高昂。同样的缺点也存在于涂鸦智能牵头的智慧养老app上，软件本身是一款专为老年人和子女设计的智能养老服务平台，可以提供健康管理、紧急呼叫、智能设备、社区服务等功能，帮助老年人居家养老和社区养老，也让子女能够随时关注老年人的生活和健康状况，但是该软件同样存在著硬件产品成本较高的问题。

云翼开发的云翼智慧养老是一款针对机构养老场景的智慧养老解决方案，可以通过智能呼叫器、智能摄像头、智能药盒等设备，实现对老年人的安全保障、医疗服务、健康服务、生活协助等软硬件一体化的养老服务体验，也可以通过云平台和移动端进行数据管理和信息推送，提高机构养老院的管理效率和服务质量。然而其功能较为简单，无法满足复杂和高端的养老需求。

### 1.2.3 数字技术适老化发展报告

这份报告紧密跟踪我国数字技术适老化建设动态，围绕政策体系、电信服务、互联网应用、终端产品等方面，系统总结我国数字技术适老化建设进展与成效，深入分析我国数字技术适老化面临的挑战，科学、全面展望未来发展前景。报告指出，推动数字技术适老化是保证全体人民在共建共享中有更多获得感、幸福感、安全感的重要手段，是践行“以人民为中心”发展思想的重要体现。

## 1.3 作品简述

本作品名称为《基于飞桨的多模态长辈智能监护系统》（简称：监护系统），具体分为老年人监护Android端，家属风险监听Android端，实时救援中心风险监听与系统管理Web端。

针对前文提到的社会背景与存在的痛点问题，本作品基于Android端与Web端开发，结合深度学习技术，采用Bi-LSTM等多种深度学习前沿核心技术，设计并实现了一个打通短信、Android端、Web端等全平台信息流渠道的长辈友好型的多平台多模态三位一体的监护管理和调度系统。部署与应用本系统到监控与防护系统上，可以实时监听老人的风险状态，并在必要时给予风险防范和风险处理的指挥性决策，最大程度上保护老年人的生命健康安全。系统创新性地提出基于**Bi-LSTM的物理信号隐式感知模型，**在非可视情况下对老人可能的摔倒、疾病发作等异常情况识别和处理；基于**YOLO-v3和XGBoost的摔倒识别模型**，可以在室内环境下监护老人的身体异常状态；应用**路径规划和优化算法**，当老人在外走失的时候可以以语音方式为老人提供细致化、快捷化的导航服务；以及在未来P4交换机普及应用的大前提下的，采用**基于NetBeacon的流量检测与调控技术**，进行重大事件的网络流量优先级控制，保障老年人身体状态信息的及时传达和响应；训练深度学习框架，不断完善对比资料库。系统架构采用行业主流的**B/S模式和C/S模式协同工作**，搭配Vue.js、SpringBoot等前后端框架以及Application Framework安卓端开发框架进行系统开发，采用**docker与k8s技术进行云原生分布式调控**，部署于阿里云ECS云服务器，发行平台为Android平台与Web平台。无感安装，轻便使用。

监护系统综合现有数据资源与服务，利用互联网、物联网等通信网络技术，集接收信息、发布信息、智能决策、人力管理、指挥响应于一体，实现了监护系统信息化、信息传达迅速化、学习预测科学化、关怀目标精准化、辅助功能贴心化，最大限度地提高对老人的身体健康和风险管控的关怀度。

具体来说，老年人监护Android端主要为老人提供风险预防和健康检测服务，家属可在家属风险监听Android端中查看老人的近期身体状态信息和跌倒、走失等风险发生具体信息，并查看数据大屏可视化展示老人身体素质情况；救援中心可以在Web端接收和查看又家属发来的求救信息，并立刻获取老人对应的时空信息和身体状态信息，并可以对用户信息、流量信息、救援信息等进行不定期的更新和维护。

## 1.4 特色综述

监护系统创新性具体表现在基于Bi-LSTM的物理信号隐式感知模型、基于YOLO-v3和XGBoost的摔倒识别模型、路径规划和优化算法、基于NetBeacon的流量检测与调控技术等。基于以上创新点，智慧型长辈监护系统构建了一个便捷迅速、标准化流程、智能精准、可靠安全的多平台多模态长辈关怀型监护系统。

### 1.4.1 便捷直观

**风险发生直观化。**在老人出现摔倒后我们将迅速将信息弹出到监护端的主页面上并进行语音提示，以最快、最直观的方式告知老人家属风险情况、风险发生位置与风险等级，并提供救援中心的快速呼救按钮，以求最快速度地对老人进行风险援助和解除。

**风险救援便捷化。**在老人出现摔倒事件时我们将迅速将基本信息预备在救援中心端，一旦老人家属决定予以救援服务，将立刻弹窗报告救援中心。由于基本信息已经预备在救援中心端，可以防止由于流量延迟造成的信息传达的不及时性，方便救援中心可以以最快速度获取到老人信息和位置，防止由于信息不及时错过了救援的黄金时间。

**健康信息可视化。**我们将定期以语音、文字、物理信号等形式记录老人的身体状态和精神状态，并在统一的健康信息分析模型中进行分析，并发送到家属端进行可视化展示，以保证在未来的时间步内就能及时预测到风险的发生，以求最大程度的风险避免。

### 1.4.2 安全可靠

**高精度、高回归率的模型预测。**我们的隐式预测模型在测试阶段达到了99.7%的高正确率，以保证能够精准预测老人的风险事件。并且我们将回归率纳入考虑范围，保证了当可能的预测情况出错时，也尽可能保证老人救援的及时性和正确性。

**有效的流量调控手段。**我们参考了最新的智能网络流量控制手段，参考并使用了NetBeacon基于P4交换机的数据平面上决策树部署以进行流量调控的方式进行流量控制，将救援信息的传递设置为最高的优先级进行流量传输，以保证紧急流量信息的及时传达。

**三位一体的守护模式。**我们将老人、家属、救援中心三端实现了高度的数据同步和数据共享，保证了三方通信信道的通畅性。当老人遭遇紧急情况时，及时的救援能够挽救生命。然而，在某些情况下，老人可能无法及时报警或联系家属和救援中心，增加了救援的难度和风险。而实现老人、家属、救援中心三端之间的数据共享，提高了老人的安全和救援效率，保护了老人的生命健康。

### 1.4.3 集成化和可迁移性

**风险管理集成。**我们在系统中集成了老人摔倒、老人走失、老人突发疾病等多种风险管控控措施整合在一起，形成一个完整的风险管理系统，以提高风险管理的效率和准确性。这可以帮助老年人及其家属和护理人员更好地应对各种风险和挑战。

**物理设备可迁移性。**在系统协同工作层面上，该系统可以协同多种设备进行合作，发送数字信号信息方便物理设备及时做出应答。例如可以和物理防护装置进行协同工作，当模型检测到老人可能会摔倒时将立即向防护装置发送信号请求，防护装置将以最快速度打开并对老人进行实时性保护；还可以和生命体征检测仪器进行集成，以提高身体健康信息的获取水平、学习水平和预测水平。

**社区管理附加组件。**在长辈端我们集成了更多的社区功能组件，如医院的挂号预约，社区服务预约，资讯推送等服务，让智慧型长辈监护系统更具有关怀价值，也能极大丰富监护系统的功能性和实用性。

## 1.5 应用前景

统计表明，2023年我国60岁以上的老年人口将达到2.6亿，占总人口的18.9%，其中独居和空巢老人接近1.2亿。同时，每年大量走失老人和独居老人跌倒致伤致死的案例无时不在提醒我们应该加强对于独居老人的关怀与照顾，然而目前我国现有的救助体系并没有明确地将走失老人纳入其中，对于家中跌倒或发生意外情况的老人也多靠同居老人或邻居发现，很容易错失救援良机。而我们的监护系统设计并开发了一个优秀的、强逻辑的一体化、标准化监控与报警工作流程，为监护人提供了高效准确的独居老人监护与救援服务，通过数据分析与可视化为监护人提供简单有效的操作服务。

《2023年度国家老龄事业发展公报》的提出，反映了中国政府对于老龄问题的高度重视与积极应对，也为老龄事业与产业的发展提供了指导与保障。解决老年人的人身安全问题，为老年人提供无微不至的健康服务正是政府所指出的广大人民的朴素需求，但是目前市场上缺少一个系统化、方位化、智能化的老年人监护系统，而我们的监护系统正能解决这一痛点。

扩大部署和应用本系统能有效地解决照顾老人过程中的痛点问题，助力现代化国家的建设。

# 二、需求分析

## 2.1 需求概述

目前长辈关怀型软件的实现和开发存在如下痛点问题：未采取任何智能化技术进行实时监控老人身体健康状态，造成产品的精度不够、拓展能力不强、无法进行产品更新迭代等问题；纯文字作为信息交互媒介对文化程度偏低以及高龄老人的使用极不友好，老年人更偏向于语音和图像等模态的信息获取方式；未考虑多场景多角度进行全方位的集成化监护的集成度不够等问题。针对以上问题，需要一套全平台信息流渠道的长辈友好型的多平台多模态三位一体的监护管理和调度系统，为老人关怀服务提供有效且有力的技术保障，从而更好地为长辈提供身心保障。

智慧型长辈监护系统共设计了四种类型的用户角色，分别为**受监护长辈用户**、**执行监护家属用户**、**救援中心信息管理运维人员**。受监护长辈用户主要需求为跌倒检测、健康状态填报、走失检测以及提供一定的社区服务等，执行监护家属用户的主要需求为健康信息查询、可视化查询和风险警报等，救援中心消息监听员主要需求为救援数量和空间位置数据看板展示、救援信息管理、待救援老人信息管理、用户管理、信息管理、流量管理、日志管理等。

## 2.2 功能需求

### 2.2.1 老年人监护Android端需求

#### 2.2.1.1 身体异常状态检测

**姿态与动作检测。**该功能可以利用手机的传感器和摄像头，实时采集老年人的姿态和动作数据，并进行分析和识别，判断老年人是否处于正常或异常的状态。

**跌倒和发病事件预测。**该功能可以根据老年人的姿态和动作数据，结合一些跌倒的特征和规律，预测老年人是否有发生跌倒事件的风险，并提前给出警示和提示。 

**跌倒和发病报警。**该功能可以在检测到老年人发生跌倒事件后，根据跌倒的严重程度，自动向家属和救援中心发送报警信息，包括跌倒的时间、地点、视频等，并提供紧急联系方式和救援方案。

**手机掉落提示。**该功能可以区分手机掉落和老年人跌倒，并在检测到手机掉落时，使用语音提示老年人拾起手机，并检查手机是否有损坏或故障。

#### 2.2.1.2 健康状态评估

**文字汇报功能。**该功能可以提供一个简单易用的界面，让老年人可以通过输入文字的方式，填报自己的健康状态，例如有无发烧、咳嗽、胸闷等症状，有无服用药物，有无进行锻炼等，并将填报内容发送给家属和救援中心。

**睡眠检测功能。**该功能可以利用睡眠检测技术对老人的睡眠状态进行获取并分析，长期睡眠状态不佳可能诱发各种疾病的产生。需要分析长期的睡眠状态来对老人的健康状态进行评估，并给予可视化展示。

#### 2.2.1.3 走失检测

**后台隐式GPS定位与追踪。**该功能可以利用手机的 GPS 定位功能，在后台隐式地获取老年人的位置信息，并实时更新和保存在服务器上，以便家属和救援中心可以随时查看老年人的位置轨迹。

**安全范围检测。**该功能可以让家属设定一个安全范围，例如一个半径为 500 米的圆形区域，并与老年人的位置信息进行比较，如果发现老年人走出安全范围，就触发走失检测的流程。

**风险发生快速报警。**该功能可以在检测到老年人走失或者长时间停留在某个位置时，自动向家属和救援中心发送报警信息，包括走失的时间、地点、地图等，并提供紧急联系方式和救援方案。

#### 2.2.1.4 社区服务

**社区服务信息查询**。该功能可以为老年人提供一些社区服务的信息，例如附近的医院、药店、超市、公园等，并显示服务机构的名称、地址、电话、评价等信息。 

**社区服务导航功能**。该功能可以为老年人提供导航服务，根据老年人选择的目的地，规划最佳的路线，并提供语音和图像的导航指引，帮助老年人到达目的地。 

**社区卫生服务对接功能**。该功能可以为老年人提供对接社区卫生服务中心的基层医疗服务资源，例如预约挂号、在线咨询、上门服务等，并提供医疗服务的进度和反馈。

### 2.2.2 家属风险监听Android端需求

暂时无法在成电飞书文档外展示此内容

家属风险监听 Android 端是为执行监护家属用户提供的一款应用，它可以帮助家属实时了解老年人的身体状态和风险情况，并及时采取相应的措施。家属风险监听 Android 端的功能需求如下：

#### 2.2.2.1 健康信息查询

**健康状态记录查询**。该功能可以让家属查看老年人最近一段时间内的健康状态填报记录，并以图表或列表的形式展示出来。家属可以选择查看某一天或某一周或某一月的记录，并可以按照不同的维度进行筛选和排序，例如按照症状、药物、锻炼等。 

**物理指标监测记录查询**。该功能可以让家属查看老年人最近一段时间内的睡眠质量、心率、血压等物理指标，并以图表或列表的形式展示出来。家属可以选择查看某一天或某一周或某一月的记录，并可以按照不同的指标进行筛选和排序，例如按照睡眠时长、心率区间、血压水平等。

#### 2.2.2.2 可视化查询 

**实时位置和轨迹查询**。该功能可以让家属查看老年人的实时位置和轨迹，并以地图的形式展示出来。家属可以选择查看某一天或某一周或某一月的轨迹，并可以按照不同的时间段进行筛选和放大，例如按照上午、下午、晚上等。 

**家庭监控视频查询**。该功能可以让家属查看老年人的家庭监控视频，并以视频的形式展示出来。家属可以选择查看实时视频或历史视频，并可以按照不同的时间段进行筛选和回放，例如按照小时、分钟、秒等。

#### 2.2.2.3 风险警报 

**风险事件报警信息接收**。该功能可以让家属接收老年人发生跌倒或走失等风险事件的报警信息，并以弹窗或通知的形式展示出来。报警信息可以包括风险事件的类型、时间、地点，如果有条件我们还可以发送跌倒事件发生的视频，同时根据风险发生人查找紧急联系方式，并智能生成一套系统的救援方案。

**风险事件处理功能**。该功能可以让家属与老年人进行语音或视频通话，或者与救援中心进行联系，以便及时处理风险事件。家属可以选择拨打老年人或救援中心的电话，询问老年人的情况或者请求救援中心派遣救援人员等，并且可以直接发送老人对应信息到救援中心，请求救援中心的及时救援。

### 2.2.3 救援中心Web端需求

智慧型长辈监护系统救援中心Web端分为数据汇总模块、任务详情模块、常态化管理模块，共7个功能点。用例图如图2-*所示。

暂时无法在成电飞书文档外展示此内容

#### 2.2.3.1 数据汇总

此模块主要用于统计和展示救援数据和任务情况。

**实时统计。**对救援中心的日常工作情况和详细地理位置以及负责片区信息进行看板展示，对于日常救援信息、历史救援信息、风险发生地区分布、风险发生人年龄阈值进行数据信息和深度可视化展示，方便管理人员进行直观化和数字化进行关键信息查询。

**任务进展。**对正在进行的救援任务进行汇总展示，允许管理和医务人员查看具体救援任务信息，允许管理人员查看待救援老人及其家属空间信息和身份信息，允许管理人员对任务进行终止、删除、重进操作，保证了任务进行的灵活性。

#### 2.2.3.2 任务详情

此模块主要用于详细展示风险发生的详细情况和风险发生人的具体信息数据。

**风险发生管理。**接收家属监护端的紧急通知，展示在急救中心的风险发生模块。工作人员可以根据接收到的信息判断并接受任务，派遣救援队到达指定地点进行救援。接受后的任务将汇总到“数据汇总”的“任务进展”中。

#### 2.2.3.3 常态化管理

此模块主要用于风险人信息常态化管理和系统日常运行维护工作的进行。

**易风险老人状态管理。**这里展示急救中心负责片区内备份的容易发生风险的老人的基本信息，当风险发生时可以最快速度查询到老人身体状况、最近疾病史、医疗史等信息，可以避免由于网络延迟造成的风险等级扩大化。

**家属管理。**在急救中心网页系统中我们也需要对家属的信息进行存储和管理，以便以最快的速度将救援行动通知到家属，并在救援中时刻和家属保持联系

**流量管理。**在可能的情况下，假设在P4交换机已经在管理片区内普及的情况下，我们可以对来自家属的报警流量按危险等级进行排序

**日志管理。**我们将借助一些Filebeat、Elastic Search等工具进行系统运行日志的分类管理，以便于系统的运行和维护。

## 2.3 非功能需求

#### **2.3.1安全性需求**

**隐私保护。**保护老年人、家属和救援人员的个人信息和敏感数据的安全性和隐私性，如位置、身份证号、医疗记录等。使用加密技术来保护传输和存储的数据，如 HTTPS 协议和 AES 算法等。

**角色限制。**限制不同用户角色的访问权限，如老年人只能查看和修改自己的信息，家属只能查看和修改自己关联的老年人的信息，救援人员只能查看和修改自己参与的救援任务的信息等。使用身份认证和授权技术来验证用户的身份和控制用户的访问范围，如密码或者指纹等方式。

**入侵保护。**防止外部的攻击和入侵，如黑客、病毒、恶意软件等。使用防火墙和反病毒等技术来过滤不安全的网络流量和检测和清除恶意软件等。

#### 2.3.2**易用性需求**

**友好的用户界面。**我们为不同用户角色提供简洁和友好的用户界面，让用户可以方便地找到和使用系统的功能。例如，救援中心 Web 端应该提供清晰的图标和文字来表示功能按钮；家属风险监听 Android 端应该提供合适的颜色和字体来显示信息；老年人监护 Android 端应该提供大号字体和简单语言来显示信息等。

**自适应的交互方式**。我们为不同用户角色提供多模态和自适应的交互方式，让用户可以根据自己的喜好和环境来选择合适的交互方式。例如，家属风险监听 Android 端提供语音、文字、图像等多种输入和输出方式；老年人监护 Android 端根据用户的设备和网络情况自动调整界面布局和内容；救援中心 Web 端根据用户的浏览器类型和版本自动调整界面样式和兼容性等。

**及时的信息反馈。**我们为不同用户角色提供及时和准确的反馈信息，让用户可以知道系统的状态和结果。例如，老年人监护 Android 端提供进度条或者提示框来显示系统正在执行的操作；救援中心 Web 端提供错误信息或者帮助信息来指导用户解决问题；家属风险监听 Android 端提供成功信息或者警告信息来告知用户操作的结果等

#### 2.3.3**健壮性需求**

**异常情况处理**。当输入数据不合法或者不完整时，能够给出默认值或者提示用户重新输入；当网络连接断开或者超时时，能够缓存数据并在恢复连接后重新发送；当系统发生故障或者崩溃时，能够记录日志并在重启后恢复数据等。

**数据备份。**我们将重要的数据备份到其他存储设备或者服务器上，以防止数据丢失或者损坏。例如，将老年人的物理指标数据和健康状态填报数据备份到云端数据库上；将家属的安全范围设置和关联老年人信息备份到本地存储上；将救援中心的任务发布和救援进展数据备份到外部硬盘上等。

**系统自调节。**在发生故障或者中断后，能够尽快地恢复到正常状态，并且保证数据的一致性和完整性。当系统由于电源断电而停止运行时，能够从备份数据中恢复之前的状态；当系统由于网络波动而导致数据传输失败时，能够从缓存数据中继续发送；当系统由于软件错误而导致功能失效时，能够从日志数据中继续执行等。

#### **2.3.4可扩展性需求**

**模块化设计。**我们采用模块化和组件化的设计，将系统的功能划分为不同的模块或者组件，并且保证每个模块或者组件的内聚性高，耦合性低，这样可以方便地增加或者替换模块或者组件。例如，将物理指标监测、跌倒检测、走失检测等功能作为独立的模块，并且通过接口与其他模块进行通信；将报警信息、救援进展、健康状态等信息作为独立的组件，并且通过参数与其他组件进行配置等。

**开放和标准的技术**。我们使用一些通用的协议和接口来实现系统的功能，并且遵循一些行业或者领域的标准和规范，这样可以方便地与其他系统或者平台进行集成或者互操作。例如，使用 HTTP 协议和 RESTful API 来实现系统之间的数据交换；使用 JSON 或者 XML 格式来表示数据结构。

**可配置和可定制的方式**。我们提供了一些参数或者选项来让用户或者管理员可以根据自己的需求或者偏好来调整系统的功能或者界面。例如，让用户可以设置自己的安全范围、关联老年人、选择交互方式等；让管理员可以设置系统的参数、更新软件、添加功能等。

## 2.4 应用场景

#### 2.4.1 老年人独自在家跌倒或发病场景

当老年人独自在家无人照看，家属在外工作无法照看，救援中心和救援队员在值班时。

物理感知模型判定异常事件发生前，老年人监护 Android 端通过传感器和摄像头检测正常工作，并周期性回传手机端物理参数，在后台形成实时监控。

老年人跌倒事件或发病事件发生后，模型判定并立刻并向家属和救援中心发送报警信息。家属风险监听 Android 端接收报警信息，并尝试与老年人通话或发送消息，如无回应，则请求救援中心派遣救援人员，并提供老年人信息。

救援中心 Web 端接收报警信息，并规划救援路线，并向救援队员发布任务，并及时更新任务详情。救援中心 Web 端接收救援队员发送的检查结果，并判断老年人是否需要送医，并通知 120 救护车，并向家属发送救援进展。如果救助成功，则救援中心 Web 端向救援队员和家属发送任务结束的信息。

#### 2.4.2 老年人健康状态常态化监控场景

老年人在家常态化健康状态填报和睡眠监控，保证家属能够准确了解老人的身体状况和睡眠情况，防止突发疾病导致的风险事件发生。

在常态化健康监管场景中，老年人监护 Android 端实时采集老年人的物理指标数据，并进行分析和记录，并向家属和救援中心发送健康状态填报信息，并提供健康建议和提醒。

家属风险监听 Android 端接收健康状态填报信息，并查看老年人最近一段时间内的健康状态填报记录和物理指标监测记录，并以图表或列表的形式展示出来，并可以与老年人进行语音或文字交流。

救援中心 Web 端接收健康状态填报信息，并分析和处理老年人的健康状况，并向家属和老年人发送一些关于健康指导或者预约服务的信息。

#### 2.4.3 老年人在外走失场景

老年人出门由于不熟悉环境或者阿尔兹海默症等病因，形成的走失事件应用场景。

在走失事件发生前，老年人监护 Android 端通过 GPS 定位功能获取老年人位置信息，并与家属设定的安全范围进行比较，如超出范围，则向家属和救援中心发送报警信息。系统判定为走失事件发生，则家属风险监听 Android 端接收报警信息，并查看老年人位置和轨迹，并尝试与老年人通话或发送消息，如无回应，则请求救援中心派遣救援人员，并提供老年人信息。

救援中心 Web 端接收报警信息，并规划寻找路线，并向救援队员发布任务，并及时更新任务详情。老年人监护 Android 端接收任务信息，并选择是否接受任务，并反馈给指挥中心。如接受任务，则根据系统规划的寻找区域与路线展开寻找，并上传疑似老年人的照片。救援中心 Web 端接收照片，并利用人脸识别技术进行比对，并将比对结果发送给家属和救援队员。如比对成功，则建议救援队员上前询问并带领老年人回家。救援队员按照指挥中心的建议，确认老年人身份并将其送回家。救援中心 Web 端向救援队员和家属发送任务结束的信息。

## 2.5 本章小结

本章主要进行了老年人监护安全系统的需求分析。该系统旨在通过智能手机和智能设备，实时监测和记录老年人的物理指标和行为状态，并在发生异常或危险情况时，及时向家属和救援中心发送报警信息，并提供救援方案和服务。该系统由救援中心 Web 端、家属风险监听 Android 端和老年人监护 Android 端三个部分组成，涉及到三类用户：老年人、家属和救援人员。本章的内容如下：

**2.1 节中概述了系统的背景和目标。**分析了老年人在生活中面临的一些安全风险和问题，描述了系统部署后对于老年人、家属和社会的积极意义，说明了系统中的三类用户的特点和需求，并据此提出了系统的总体需求。

**2.2 节中详细描述了系统的功能需求。**分别从救援中心 Web 端、家属风险监听 Android 端和老年人监护Android端提出了12个模块、24个功能点的需求，并用用例图和用例描述的方式进行了说明。

**2.3 节中详细描述了系统的非功能性需求。**分别从系统安全性、易用性、健壮性和可扩展性四方面分析了系统需求。

**2.4 节中描述了系统的主要应用场景。**详细描述了老年人跌倒家属救援场景、老年人走失家属寻找场景和老年人健康状态填报家属查询场景，并用文字描述的方式进行了说明。

# 三、系统设计

## 3.1 总体设计

本节概述智慧型长辈监护系统的总体设计，从系统架构设计、系统总体流程设计、系统功能模块设计、系统关键算法设计、系统数据库设计及接口设计对系统结构进行介绍。

### 3.1.1 架构设计

智慧型长辈监护系统软件架构设计分为数据采集层、业务逻辑层和基础服务层。软件架构图如图3-1所示。

![img](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=YTQ1YmY2NWI5ZDBlOWI2OWQzZGI2YTFmMzBiZDBjMzJfZnRqSlk0bGRqSmFlbTV6NFJDM1BwUkZGNDNSWWpxUjBfVG9rZW46UlBqUGJoQjBLb21WNjF4NVhXMmNER0ZIbjJjXzE2OTU4NzcwMzk6MTY5NTg4MDYzOV9WNA)

#### 3.1.1.1 数据采集层

在系统中，数据采集层负责与用户交互，负责用户数据采集、转发与存储，负责从业务逻辑层接收数据并在移动端前端和网页前端进行合理的展示和可视化分析。在数据采集层中又可以根据系统的分模块实现，分为长辈监护端、家属监听端、急救中心端。在数据收集的同时，为各个角色的用户提供相应的服务。

#### 3.1.1.2 业务逻辑层

在业务逻辑层是整个系统的核心逻辑实现部分。例如数据调取集成、用户信息结构化、基础服务云原生。此外，存储空间维护保障系统数据存储业务的可用性、完整性与机密性，排查可能存在的故障节点系统宕机风险，提高系统的健壮性；数据统计分析作为数据中台的核心业务，为系统数据分析、性能优化提供决策依据；云原生作为基础服务的主要部署方式，为系统运维提供了负载均衡、流量处理、服务熔断与降级等基本控制，保证了系统运转的鲁棒性和自我修复能力。

#### 3.1.1.3 基础服务层

在基础服务层是基于百度飞浆的与深度学习核心技术。基于Bi-LSTM的隐式感知模型可以持续读取老人手机中速度、加速度、海拔、旋转方式等物理信息，可以根据获取到的数据判断老人是否摔倒。基于YOLO-v3和XGBoost的摔倒检测可以借助摄像头等外设，在有限的空间内进行精准地判断老人摔倒与否。基于ASR系统的语音识别可以帮助文化程度不高和身体不便的老人填写身体健康状态，以便进行进一步的状态判断。基于NetBeacon的智能流量决策功能则是在未来可能出现P4交换机普及的情况下，对警报流量在数据平面上保证有限传输的技术。

## 3.3 关键算法设计

本节概述智慧型长辈监护系统的核心算法实现。主要包括基于Bi-LSTM的物理信号隐式感知模型、基于YOLO-v3网络和XGBoost的摔倒检测、动态路径规划与优化算法、基于NetBeacon的流量检测和调控技术的技术背景介绍和具体的实现细节。

### 3.3.1 基于Bi-LSTM的物理信号隐式感知模型

Bi-LSTM的分类依据是移动端可以获得的速度、加速度、海拔、旋转性、震动性等物理参数代入模型进行判断，经过Bi-LSTM网络分析预测从而判断老人当前的运动状态是否属于异常状态，如摔倒、具有震颤症状的疾病发作，或仅仅由于老人手持不稳而导致普通的手机掉落。如果判断出现了异常状态，则立刻向监护端发出报警，并报告原因；如果仅是手机普通掉落，则使用语音提示老人拾起。

双向长短期网络Bi-LSTM是长短期神经网络LSTM的改进，其结构基本保持与长短期神经网络LSTM一致。而LSTM的技术模型的原型是循环神经网络RNN，LSTM在模型构造上基本与RNN采取相同的模式。接下来我们将从模型架构和实现细节详细介绍Bi-LSTM的算法实现。

#### 3.3.1.1 隐变量自回归模型和马尔科夫模型

**隐变量自回归模型**（Latent Variable Autoregressive Model，简称LVAR）是一种统计模型，用于描述时间序列数据中存在的潜在（隐含）变量之间的动态关系。这种模型可以在考虑观测数据的基础上，通过引入隐变量来捕捉数据背后的更复杂结构和动态演化。LVAR模型通常结合了自回归模型（AR模型）和隐变量模型的特点，以更好地描述数据的动态特性。LVAR模型的一般形式可以表示为：

$$Y_t = Φ(Y_{t-1}, Z_t) + ε_t$$

其中：$$Y_t$$是观测数据，表示在时间点 t 的观测值；$$Φ$$是一个函数，用来描述观测数据$$Y_t$$如何依赖于自身的过去观测值$$Y_{t-1}$$和隐变量$$Z_t$$；$$Z_t$$是隐变量，代表在时间点$$t$$的潜在状态或特征。$$ε_t$$是误差项，表示模型无法捕捉到的随机噪声。

![img](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=MmE2ZDM4YjhiMjFkMzdlZWNlMjc5NGE4YzA4NWZmZjRfdXZRcXhHNUtrN1RWN2NQTWRLdXlWaVBscjdVTUNENTZfVG9rZW46RjV0MmJJQ0o4bzFsYnl4RzZPTGNqUEo0bmVjXzE2OTU4NzcwMzk6MTY5NTg4MDYzOV9WNA)

相对于传统的自回归模型，隐变量自回归模型能够更好地捕捉时间序列数据中的复杂性和动态演化。同时，LVAR有更强大的建模能力，引入了隐变量，允许模型更灵活地捕捉时间序列数据中的潜在结构和复杂依赖关系，使得LVAR模型能够处理更复杂的数据模式，包括非线性和高阶关系；LVAR模型可以同时考虑多个观测变量之间的交互作用，从而更好地建模多变量时间序列数据，有助于捕捉变量之间的关联和相互影响；LVAR模型将观测数据分解为隐变量和误差项的组合，有助于将数据中的随机噪声和模型无法捕捉到的不确定性分离开来，可以提高模型对数据的解释和泛化能力；LVAR模型可以提供关于隐变量的信息，这些隐变量可以代表数据背后的潜在特征或状态。这有助于更深入地理解数据生成的机制；并且，由于LVAR模型考虑了隐变量的影响，它更适用于非平稳时间序列数据，可以在一定程度上对数据的漂移和趋势进行建模。

**马尔科夫模型（Markov Model）**是一类用来描述随机过程的数学模型，其中状态的未来发展仅依赖于其当前状态，而与过去的状态无关。这个特性被称为“马尔科夫性质”（Markov Property），它表明在马尔科夫模型中，给定当前状态，过去的状态和事件序列对未来状态的影响都是通过当前状态来实现的。马尔科夫模型有两个常见的变种，分别是**马尔科夫链**和**隐马尔科夫模型**。在Bi-LSTM中采用的是马尔科夫链，其计算公式如下：

$$P(X_t,X_{t-1},...,X_1)=\prod\limits_{i=1}^tP(X_{i}|X_{i-1})=P(X_t|X_{t-1})...P(X_3|X_2)P(X_2|X_1)P(X_1)$$

马尔科夫链通常由状态空间、状态转移概率、时间步三要素组成。状态空间（State Space）是马尔科夫链包含一组离散的状态，每个状态表示系统或过程可能处于的不同情况或状态。状态转移概率（State Transition Probabilities）描述了从一个状态转移到另一个状态的概率，这些概率构成了状态转移矩阵，其中每个元素表示从一个状态转移到另一个状态的概率。时间步（Time Steps）： 马尔科夫链按时间步前进，每个时间步系统处于一个特定的状态。状态在不同时间步之间发生转移，根据状态转移概率决定下一个状态是什么。

#### 3.3.1.2 时间反向传播

**时间反向传播**（Backpropagation Through Time，BPTT）是一种用于训练递归神经网络的反向传播算法的变体。与标准的前向传播和反向传播算法类似，BPTT允许在序列数据上进行训练，通过传播误差信号来更新网络的权重和参数，以优化模型的性能。依据反向传播原理和链式法则进行计算我们可以得到：

$$E(\frac{\partial h_t}{\partial w_h})=z_t=\frac{\partial f(x_t,h_{t-1},w_h)}{\partial w_h}+\sum ^T_{t=1}(\prod^t_{j=i+1} \frac{\partial f(x_j,h_{j-1},w_h)}{\partial w_{j-1}})\frac{\partial (x_i,h_{i-1},w_{h})}{\partial w_h}$$

时间反向传播按照马尔科夫模型和隐变量自回归模型的思想对反向传播的求解进行了在时间步上的截断，截断方式有时间截断和随机截断，而模型中采用随机截断，截断方式如下所示：

$$P\{\xi_t=i\}=\left\{\begin{aligned}1-\pi_t   &&   \xi_i=0   \\ \pi_t     &&   \xi_i=\frac{1}{\pi_i} \end{aligned} \right.$$

截断后有效地减少了模型训练和预测的计算量，并保证了模型训练质量。

$$E(\frac{\partial h_t}{\partial w_h})=z_t=\frac{\partial f(x_t,h_{t-1},w_h)}{\partial w_h}+\xi_i\frac{\partial f(x_i,h_{t-1},w_h)}{\partial w_{h-1}}\frac{\partial w_{h-1}}{\partial w_h}$$

#### 3.3.1.3 LSTM单元结构与机制

LSTM单元在RNN单元上进一步完善和细化了内部结构，使其比RNN单元具有更多的功能性和数学含义。LSTM由输入门、输出门、遗忘门、更新状态、隐藏状态五个部分构成。其中**输入门**控制新输入信息的流入程度，决定了哪些信息将被添加到状态中，输入门的计算涉及当前输入和前一个时间步的隐藏状态；**输出门**控制当前时间步的输出，以及后续时间步的隐藏状态，它基于当前输入和前一个时间步的隐藏状态来计算； **遗忘门**决定了从状态中丢弃哪些信息，以便控制长期依赖关系，它使用当前输入和前一个时间步的隐藏状态来计算，可以选择性地忽略或保留信息；**更新状态**是由根据输入门和遗忘门的输出，更新当前时间步的状态，这一步将新的输入信息添加到状态中，同时考虑遗忘的旧信息，又称为长期状态；**隐藏状态**是LSTM单元的主要输出，包含了经过门控单元和状态单元处理后的信息，将传递到下一个时间步，又称为短期状态。

![img](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=Y2IyZTdiZTNjNzg0MDFiZDE0NmVlN2IzM2NjOGZlMzNfeFdob0ZEZXFjSUp5SnhkWFo5Mkxwc1cwTHM3eHN3WmdfVG9rZW46QWhlRmJHNVhVbzk2cTh4T2NrN2Nna3hzbnBlXzE2OTU4NzcwMzk6MTY5NTg4MDYzOV9WNA)

LSTM首次采用门结构对隐藏状态和更新状态进行信息更新，保证信息的长期流转额保存，这样使即使在较为靠后的时间步中也能充分利用到之前时间步学习到的信息。根据设计图，我们可以得到三个门控结构的更新：

$$F_t=\sigma(X_tW_{xh}+H_{t-1}W_{hh}+b_h)\\ I_t=\sigma(X_tW_{xh}^{(1)}+H_{t-1}W_{hh}^{(1)}+b_h^{(1)})\\ O_t=\sigma(X_tW_{xh}^{(2)}+H_{t-1}W_{hh}^{(2)}+b_h^{(2)})$$

由此可得到候选记忆元更新公式：

$$C_t'=tanh(X_tW_{xh}^{(3)}+H_{t-1}W_{hh}^{(3)}+b_h^{(3)})$$

进而我们就可以得到记忆元状态更新和隐藏状态更新方式：

$$C_t=F_t\odot C_{t-1}+I_t\odot C_t'\\ H_t=O_t\odot tanh(C_{t}')$$

LSTM单元的核心思想是通过门控机制来控制信息的流动和记忆，使网络能够有效地学习和捕捉序列数据中的长期依赖关系。这使得LSTM在处理语言、音频、时间序列等数据时表现出色，克服了传统RNN在长序列数据上的梯度消失问题。另外，LSTM的构成也允许网络学习何时记住信息，何时忘记信息，以及何时输出信息，从而在各种任务中表现出优秀的性能。我们也将在异常状态检测模型中使用这一优势来解决信息随着时间步的增长而指数式衰退的问题。

#### 3.3.1.4 Bi-LSTM相对于LSTM的优势

双向长短时记忆网络相对于传统的长短时记忆网络而言，采取了双向信息流动，可以同时从过去和未来两个方向传递信息。这种双向信息流动有助于模型更好地捕捉时间序列数据中的上下文和模式，从而提高了建模能力。这与我们在摔倒场景中的物理信息连续变化曲线，考虑每一个时间步输入数据进行摔倒判断有着极为重要的作用。

由于双向信息流动，Bi-LSTM可以获得更丰富的特征表示，能够捕获序列中不同时间步之间的相关性和依赖关系，这有助于更准确地捕捉序列中的局部和全局模式。Bi-LSTM也有更好的上下文理解，双向信息流动使Bi-LSTM在处理文本等序列数据时能够更好地理解上下文。

Bi-LSTM在长时间步的训练和预测中往往表现出更好的性能，特别是当序列数据的前后关系对任务成功至关重要时，比如我们的摔倒检测中摔倒前的物理状态和摔倒后的物理状态都应平等纳入模型推理，所以在当前应用场景下，Bi-LSTM有更好的表现效果。

### 3.3.2 基于**YOLO-v3网络和XGBoost的摔倒检测**

#### 3.3.2.1 算法描述

本系统算法主要步骤如下：首先利用优化的YOLO算法检测出人体区域利用区域多人姿态估计(RMPE)网络提取出人体关节点(头部、髋部、膝盖、脚等)的坐标,据此计算出关节的角度等信息，通过计算提取出特征向量；最后将所得特征向量输入到XGBoost模型进行训练,实现人体的摔倒检测。

这可以保证在有监控等摄影条件的情况下，进行老人的摔倒异常状态检测。

#### 3.3.2.2 优化的YOLO-v3

为了提高人体区域检测的稳定性,本文在原有的YOLO-v3模型基础上添加squeeze-and-excitation(SE)模块，建立了不同特征通道之间的相互依赖关系,其核心思想是为每个特征通道学习一个权重值。图2为SE模块的基本结构。

SE模块主要由三个部分组成：squeeze、excitation和scale。

![img](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=NWNjMTk4NjMzMTQ5ODU5ZWRkNTc2NTE1YzMyMjVjYjRfUVZVMWNWRmdMVEp4SGZkemF0UzhNN3FYVVJjbkNPZHdfVG9rZW46U3lxaWJsckRWb2c2V0d4WXY2eGMydGJabkNoXzE2OTU4NzcwMzk6MTY5NTg4MDYzOV9WNA)

squeeze是为每个通道计算一个全局特征值，实现原理为全局平均池化,具体计算式为：

$$z_c=F_{sq}(u_c)=\frac1{H×W}\sum ^H_{m=1}\sum^W_{n=1}u_c(m,n)$$

式中： $$u_c$$代表$$c$$个特征通道，每个特征通道的尺寸为$$H\times W$$；$$F_{sq}$$为squeeze函数； $$z_c$$为c个特征通道生成的全局信息。

excitation是通过神经网络来学习网络通道的依赖性，具体计算式为： 

$$s=F_{ex}(z,W)=σ[g(z,W)]=σ[W_2δ(W_1z)]$$

式中：$$g $$代表全连接层结构函数；$$σ$$和$$δ$$代表两个激活函数，分别是Sigmoid函数和ReLU函数；$$W$$为权重系数；$$W_1 $$和$$W_2$$代表两个全连接层的参数；$$F_{ex} $$表示excitation函数；$$s $$表示各特征通道的权重。经过excitation之后得到了维度为 $$1×1×c$$的$$s$$，这个$$s$$也就是SE的核心，它刻划了不同特征通道之间的联系，代表每一个通道的权重。

最后一步scale则是将上一步计算得到的$$s$$乘到对应的特征通道上，具体计算式为：

$$x_c =F_{scale}(u_c,s_c)=s_c\cdot u_c$$

在式中：$$s_c$$为经过前式得到的$$s$$的第$$c$$个维度的值;  $$F_{scale}$$表示scale函数；$$x_c$$为输入值经过 SE 模块之后对应特征通道的输出结果。将这种思想引入人体区域检测可以削弱光照等对网络的影响。 

#### 2.3.2.3 XGBoost模型

XGBoost属于Boosting算法的一种，是一种提升树模型，即基分类器为树模型，其模型表达式为：

 $$y_0'=∑^K_{k=1}f_k(x_0)$$

式中：$$f_k$$表示第$$k$$个基学习器(树模型)；$$K$$为基学习器总数：$$y_0'$$为样本$$x_0$$的预测结果； $$y_0$$为样本理论结果。设定损失目标函数为：

$$L =∑_ol(y_o,y_o')+∑_kΩ(f_k)$$

式中：$$l$$为损失函数，体现了预测值与真实值之间的误差，其形式不是固定的，只要满足二阶可导即可；$$Ω$$为正则函数，具体形式为：

$$Ω(f)=γT+\frac12λ‖ω‖^2$$

式中：$$T$$代表叶子节点的数量；$$ω$$表示叶子权重矩阵；$$\gamma$$和$$\lambda$$为正则项系数。根据前面所述，新增加的树是为了拟合截至上一次预测的残差，因此，假设当前为第$$t$$棵树$$y'^{(t-1)}_{o}$$可以视为已知，则预测结果可以写成：

$$y^{(t)}_0 =y^{(t-1)}_0+f_t(x_0)$$

于是，在只考虑本轮的情况下,优化目标函数可写成：

$$L^{(t)}=∑^n_{o=1}l[y_o,y'^{(t-1)}_o +f_t(x_o)]+Ω(f_t)$$

其目标是解出$$f_t$$使得此轮的目标函 数最小。对上式进行泰勒二阶展开可得：

$$L^{(t)}≈∑^n_{o=1}[l(y_o,y'^{(t-1)} +g_of_t(x_o)+\frac12 h_of^2_t(xo)]+Ω(f_t)$$

因为前面$$t-1$$棵树已经训练完成， 故$$l(y_i,y'^{(t-1)})$$可视为常数，对本轮优化不产生影响，因此简化目标函数可得：

 $$L^{(t)}=∑^n_{i=1}g_if_t(x_i)+\frac12 h_if ^2_t(x_i)]+Ω(f_t)$$

为了方便计算，通过遍历叶子节点的方法来替代遍历所有样本的方法最终算出$$ω$$中最优解$$ω^*$$以及目标函数的最小值：$$ω^*_z=-\frac{G_z}{H_z+λ}$$， $$L_{obj}=-\frac12 ∑^T_{z=1}\frac{G^2_z}{H_z+λ}+γT$$

#### 2.3.2.4 算法总结

针对老人受异常情况（如急性病发作、物理跌绊等异常情况）摔倒检测多分类任务，需要改进XGBoost的回归部分，即将每棵树的叶子节点设置为需要分类的个数（本作品将人体姿态分为3类：摔倒、站立、坐），并且使用 Softmax函数，最后经过所有基学习器（提升树）的累加即可得到最终的打分值，进而给出分类结果。

### 3.3.3 动态路径规划与优化算法

### 3.3.4 基于NetBeacon的流量检测与调控技术

我们根据NetBeacon技术对在未来可编程交换机的普及的大前提下，对本系统的未来发展方式进行了展望。

NetBeacon中使用在交换机上部署决策树的方式来进行可编程、可调控化的流量决策和控制。NetBeacon通过建立一个模型表和若干个特征表的方式对决策树模型进行了表述，简化表达了流量转发逻辑，实现了在数据平面上流量转发的智能决策，是流量工程发展的重要里程碑。NetBeacon还关注长流流级特征的存储和表述，利用长期流量流级特征获取，以加强流量转发决策的精准度、模型的表达能力和适用范围。

![img](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=NThhYmJhNmQxNzgzNGVkMDIyN2YxZmVhZGU5MmQ2YWJfMndEalk0dGIzNE04T1pKTzRveG1lWjhQVkQ1ODBRNEFfVG9rZW46WHhZdGJJOGt2b1ljNTR4blRwY2NpZzVrblFjXzE2OTU4NzcwMzk6MTY5NTg4MDYzOV9WNA)

在本作品中，我们将尝试性地在NetBeacon的基础上为我们的作品提供一套流量控制逻辑，来为我们的系统的安全性、及时性、可靠性做一定程度的保障。我们将获取并学习在交换机中的流量转发数据，并对老人摔倒的报警信息给予更高的优先级，并代入深度学习模型中进行训练，再通过知识蒸馏技术将深度学习模型转化为决策树模型，并使用深度优先搜寻算法将树模型拆成一张模型表和若干张特征表的形式在可编程交换机层面上进行部署，以便进行紧急流量的优先调控。

![img](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=ODg3MmUyYTE4ZWQwZWRhMTM4ZTZlNDNjOTA0YmI0NDNfRmthclY0Z1lqMXFCRmpxZXNSbUc5SkU5MDdxTE9Kb2FfVG9rZW46TDBpZWJCUnBGb0xjbk94MkVPUmNJU3NObnZoXzE2OTU4NzcwMzk6MTY5NTg4MDYzOV9WNA)

当然目前可编程式交换机、SRv6技术和SDN技术并未在国内得到相当程度的普及，所以本部分算法实则为对本作品在未来一定时间步长内拓展和发展的可预见性展望。

# 四、系统实现

### 4.1.1 百度飞桨平台及Paddle工具库的使用

#### 4.1.1.1 百度飞桨平台简要介绍

**百度飞桨（PaddlePaddle）**是一个由百度开发的开源深度学习平台，旨在为开发者和研究人员提供一种灵活、高效的方式来构建、训练和部署深度学习模型。飞桨于2016年首次发布，已经成为广泛使用的深度学习框架之一，尤其在中国具有很高的影响力。百度飞桨拥有多种深度学习平台特点，其相对于传统的TensorFlow和PyTorch有具有极强的优势。

**灵活的编程模式和丰富的模型库。**飞桨支持静态图（类似于TensorFlow）和动态图（类似于PyTorch）两种编程模式，用户可以根据项目的需要选择适合的模式，提供了丰富的预训练模型和模型库，涵盖了计算机视觉、自然语言处理、推荐系统等多个领域，有助于加速模型的开发和部署。

**高性能计算、部署与移动端支持。**飞桨优化了计算图和计算资源的使用，支持多卡并行训练、分布式训练等技术，可以在大规模数据集上高效地进行模型训练。飞桨支持将训练好的模型部署到移动端设备、嵌入式设备和服务器上，以便实现实时推理和应用。

#### 4.1.1.2 Paddle工具库的使用

在本项目中将借用Paddle工具库进行对于老人异常情况摔倒检测相关两个核心的算法实现，分别为：**基于Bi-LSTM的物理信号隐式感知模型**和**基于YOLO-v3网络和XGBoost的摔倒检测**，前者负责在物理层面上感知老人摔倒和判断，后者负责在可视化层面上进行老人异常情况判定。相比之下前者的判定受限制较少，而后者的判定则更为精确。我们结合两种深度学习判定技术以保证项目的能达到最高的回归率和精度，保护老人的身心健康安全。

#### 4.1.1.3 **Bi-LSTM物理信号隐式感知**

在**基于Bi-LSTM的物理信号隐式感知模型中**，我们将在Paddle中采用类似于PyTorch的动态图模式进行模型构建工作。

在数据预处理部分，我们的输入是来自安卓端的物理信号数据。在开始之前，我们首先要对**连续性数据**进行预处理，以便更好地输入到模型中。这就是为什么我们会使用`paddle.nn.functional.standardize`函数，它能够将大范围的数据进行归一化，确保各个特征的数据权重几乎一致，从而帮助模型更好地学习。除了连续性数据，我们可能还有一些**离散型数据**和**文本标签**。为了将它们有效地融入模型中，我们使用`paddle.nn.Embedding`层进行嵌入编码。这将有助于将离散型数据转化为连续的表示，使模型能够更好地理解和处理这些信息。在处理序列数据时，长度可能不一致。在将数据送入模型之前，我们需要对序列进行**填充或截断**，以使它们具有相同的长度。这可以通过`paddle.nn.functional.pad_sequence`等函数来实现。填充可以用特定的值填充序列的末尾，而截断则可以剪切过长的序列。

![img](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=ZGNjYTBjMGJiM2U5Y2I2MmJkNDJmZjM5NjFmNjg2ZWZfeVVSM3gxY3pmNHIzaWVYV2JjWXJxN3lIejJXZlhwRlpfVG9rZW46QjVCY2JOeGRQb29XcE54aGYwV2NnRHdKbkNHXzE2OTU4NzcwMzk6MTY5NTg4MDYzOV9WNA)

在模型构建上，我们使用Paddle提供的**Bi-LSTM**（双向长短时记忆网络）层来学习数据的时序特征。Bi-LSTM是一种适用于序列数据的神经网络层，能够捕捉数据中的时间依赖关系。通过双向结构，它能够同时考虑过去和未来的信息，从而更全面地理解序列中的模式和趋势。同时在Bi-LSTM之后，我们引入**多层全连接神经网络**，用于进一步拟合数据和提取高级特征。这些层可以帮助模型更深入地理解数据的复杂性，并且可能有助于捕捉一些更抽象的模式。

同时在模型训练中我们使用飞桨提供的Dropout正则化和BatchNorm层进行数据的规范和统一，最后通过Softmax激活函数导出结果。最后将模型转化为ONNX格式导出并部署到移动设备即可。

#### 4.1.1.4 **基于YOLO-v3网络和XGBoost的摔倒检测**

在**基于YOLO-v3网络和XGBoost的摔倒检测**，我们将在Paddle中也采用类似于PyTorch的动态图模式进行模型构建工作。

Paddle提供了名为PaddleDetection的目标检测工具库，其中包括了YOLO-v3模型的实现。这个工具库为目标检测任务提供了一套方便的接口和工具，使我们能够更容易地使用和训练YOLO-v3模型。我们也将借助Paddle平台为我们提供的YOLO-v3模型对我们在测试中获取并保存的数据集进行迁移学习，使其进一步适应于我们的老人异常情况摔倒的分类任务。同时，我们可能会对YOLO-v3的结构进行改良和改善以满足我们当前的深度学习需求。

在我们完成训练后我们将使用知识蒸馏技术对YOLO-v3模型进行蒸馏，最后得到一棵XGBoost的树结构，同时将其转化为ONNX格式在移动设备上进行部署。

![img](https://uestc.feishu.cn/space/api/box/stream/download/asynccode/?code=MGQ0NDU2OTRlYzlkN2VhZWM4ZWMzMTc0YWQ1Mzc0MmNfVVM4a2M1YUtvQTV0ZlFxTloyQlZ5aTgwUGFma3BuVDVfVG9rZW46UUVJeGIzTmNCb0YzNTl4WVRWaGN2Vm1XbnRkXzE2OTU4NzcwMzk6MTY5NTg4MDYzOV9WNA)

其余部分，如具体调参的技术细节和数据预处理技术，在上一部分已经详细叙述，这里不再进一步赘述。

### 4.1.2 安卓前端技术方案

#### 4.1.2.1 技术选型

**OKHTTP**：基于 Okio 的高性能 HTTP 客户端，支持 HTTP/2、连接池、GZIP 压缩、缓存等特性，可以方便地构建和执行各种 HTTP 请求和响应。

**Retrofit**：基于 OKHTTP 的类型安全的 HTTP 客户端，可以将 HTTP API 转换为 Java 接口，并使用注解来描述请求参数、方法和头部等信息，可以支持多种数据格式和转换器，如 JSON、XML、Protobuf 等。

**Fast Android Networking**：基于 OKHTTP 的网络库，可以实现任何类型的网络操作，如下载文件、上传文件、消费 REST API 等，并且支持 RxJava 和 RxJava2 等响应式编程框架。

#### 4.1.2.2 方案实现

**基本的安卓前后端数据交互：**使用 OKHTTP 来发送和接收 HTTP 请求和响应，并设置请求的属性和处理响应的结果。例如，当老年人监护 Android 端需要向后端发送老年人的身份证号和位置信息时，可以使用 OKHTTP 来构建一个 POST 请求，并添加请求头部和参数，并执行异步请求，并在回调中处理结果。使用 OKHTTP 的拦截器来处理请求和响应的拦截和重试等逻辑。

**图片等文件类型数据的交互：**使用 Retrofit 来将 HTTP API 转换为 Java 接口，并使用注解来描述请求信息。使用 Retrofit 的 Call 类来封装请求和响应，并执行异步请求，并在回调中处理结果。使用 Retrofit 的 Converter 接口来实现不同数据格式的转换。例如，当家属风险监听 Android 端需要从后端获取老年人的健康状态填报信息时，可以使用 Retrofit 来定义一个 Java 接口方法，并添加查询参数，并创建一个 Retrofit 对象，并添加一个数据转换器，并创建一个 Java 接口的实例，并调用接口方法来创建一个 Call 对象，并执行异步请求，并在回调中处理结果。

**复杂的网络操作和响应式编程：**使用 Fast Android Networking 来实现一些复杂的网络操作，并支持响应式编程框架。例如，当救援中心 Web 端需要向救援队员发送一张老年人的照片时，可以使用 Fast Android Networking 来上传文件，并添加文件参数，并生成一个请求对象，并设置请求的优先级，并获取一个响应式对象，并指定线程调度器，并订阅观察者，并在观察者中处理结果。

### 4.1.3 网页前端技术方案

#### 4.1.3.1 Vue框架

Vue是在国内最流行的前端JavaScript框架，用于构建用户界面和单页面应用程序（SPA）。它的目标是通过简单、灵活的方式帮助开发者构建交互性强、高效的Web应用。

Vue支持响应式数据绑定，通过使用双向绑定和虚拟DOM技术，实现了响应式数据绑定。当数据发生变化时，页面会自动更新，无需手动操作DOM。可以进行组件化开发，鼓励将界面拆分为多个可复用的组件，每个组件都有自己的逻辑和模板，可以方便地组合成更大的应用。这些特性可以帮助我们可以有结构地构建Web页面，简易化进行DOM操作。

Vue还支持一系列的功能性管理，比如指令（如`v-bind`用于绑定属性，`v-model`用于实现双向数据绑定，`v-for`用于循环渲染等）、模板语法（类似HTML的模板语法，使开发者能够在模板中声明界面的结构和逻辑）、事件处理（通过`v-on`指令来监听DOM事件并触发相应的方法），以及过滤器、计算属性、路由管理、状态管理、插件系统等，极大程度上简化了前端页面的开发流程。

#### 4.1.3.2 Element UI组件库

Element UI是一个基于Vue.js的开源前端组件库，旨在帮助开发者快速构建现代化的Web应用界面。它提供了一系列易于使用且功能丰富的UI组件，使开发者能够轻松地构建出具有吸引力和交互性的用户界面。

本项目的急救中心端也采用了Element UI组件库作为模板组件进行极速开发，在网页的快速成型的同时保证了代码的可复用性和稳定性。

### 4.1.4 后端技术方案

#### 4.1.4.1 SpringCloud框架

SpringCloud是若干个框架的集合，提供了全套的分布式系统解决方案。包含了：服务注册与发现、配置中心、服务网关、智能路由、负载均衡、断路器、监控跟踪、分布式消息队列等等。

Spring Cloud 通过 Spring Boot 风格的封装，屏蔽掉了复杂的配置和实现原理，最终给开发者留出了一套简单易懂、容易部署的分布式系统开发工具包。开发者可以快速的启动服务或构建应用、同时能够快速和云平台资源进行对接。

值得注意的是，在微服務架構中網關屬於入口級別的服務，一旦宕機後果十分嚴重，所以本項目部署時將采取Nginx+OpenRestry進行對網關的負載均衡，而對外統一接口地址。同時爲了解決Nginx層的單點問題，我們還將使用KeepAlive。

#### 4.1.4.2 SpringSecurity

Spring Security是一个Java框架，用于保护应用程序的安全性。它提供了一套全面的安全解决方案，包括身份验证、授权、防止攻击等功能。Spring Security基于过滤器链的概念，可以轻松地集成到任何基于Spring的应用程序中。它支持多种身份验证选项和授权策略，开发人员可以根据需要选择适合的方式。此外，Spring Security还提供了一些附加功能，如集成第三方身份验证提供商和单点登录，以及会话管理和密码编码等。总之，Spring Security是一个强大且易于使用的框架，可以帮助开发人员提高应用程序的安全性和可靠性。

#### 4.1.4.3 基於Mysql、Redis、Kafka的數據管理

Mysql是一種開源的關係型數據庫管理系統，它支持SQL語言操作，數據以表格形式存儲。

Redis是一種開源的內存數據存儲系統，它支持多種數據結構，包括字符串、哈希、列表、集合和有序集合等。Redis的數據存儲在內存中，因此具有極快的讀寫速度，同時也支持數據持久化，可以將內存中的數據保存到磁盤中，以保證數據的安全性。

Kafka是一款由Apache開發的分佈式流處理平台，它能夠處理高容量、高吞吐量的實時數據流。Kafka採用了發布/訂閱模式，即生產者將消息發布到Kafka的主題中，消費者從這些主題中訂閱並消費消息。Kafka的主題可以分為多個分區，每個分區可以在不同的服務器上進行副本備份，以保證消息的可靠性。Kafka的消息傳遞基於輕量級的消息協議，支持高吞吐量、低延遲的消息傳遞。

# 五、开发效果展示

## 5.2 长辈端运行截图

<div style="display:flex;justify-content: space-between;">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/d028a34e407b4607bf37fbaeba200760f2b6ad8d60a2433fae5428d66a622ee0" style="width:23%">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/e579c20f49284508b2ad8e04a2ece5e242099c6723814723b473ed4cd04ef785" style="width:23%">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/38bea4f37a2b4d418b4f3934838e0792824e2a4c18494f7c85424ccde5728568" style="width:23%">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/7decc5622a524c32a6e75f9bbe26b1eb952d58adf5ce412baa0c07540f81d332" style="width:23%">
</div>
## 5.2 监护端运行截图

<div style="display:flex;justify-content: space-between;">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/10da8bcc29a24beb86293572373f63095efdd4e2dbc14053937efa40b1da79e5" style="width:23%">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/854ba611f1154acc9271b2f194e2389f32d33ed2929240d2bda6c575d9ae1732" style="width:23%">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/c9773adddb8b4432af9acf0105ba4c8187f37df992fa47188f8c029bba4d3554" style="width:23%">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/549c70871f994d23a503f10d45aaeaf99449d81aa52b4020842d978e167d9b89" style="width:23%">
</div>
## 5.3 急救中心运行截图

<div style="display:flex;justify-content: space-between;">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/3e46b9a0b96f46e681097f87085905caa21848a038ff4c6785e5463157e1543a" style="width:49%">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/6fbc589e9e1b451e8ccbd44f4b6265c753987651a9db4153b606bf55efa917fd" style="width:49%">
</div>
<div style="display:flex;justify-content: space-between;">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/a7ce2d1c0f7d4688a1f30b0859b93cfadd771972f15e4921ae0bf0bdc576262f" style="width:49%">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/7bb8f5ef7d1b4f949898aa39d31386c2efd8b4a131984c09ae74d584a31dd600" style="width:49%">
</div>
<div style="display:flex;justify-content: space-between;">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/569b485cb89e470994ba8906ec0be8213c1fd436e6014fabb5062b7a8b10eeef" style="width:49%">
    <img src="https://ai-studio-static-online.cdn.bcebos.com/b037fa78d8f84cc7a261298fb8152b66aa78cb2c9208493fa5cbe568e0d1a2c2" style="width:49%">
</div>



